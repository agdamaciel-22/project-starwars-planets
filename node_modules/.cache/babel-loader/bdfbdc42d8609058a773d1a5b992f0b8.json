{"ast":null,"code":"var _jsxFileName = \"/home/myrella/\\xC1rea de Trabalho/projetos2/sd-021-b-project-starwars-planets-search/src/context/TableProvider.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport TableContext from './TableContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction TableProvider(_ref) {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [data, setData] = useState(null);\n  const [name, setName] = useState('');\n  const [filteredData, setFilteredData] = useState(null);\n  const [isAlreadyFiltered, changeAlreadyFilter] = useState(false);\n  const [filterColumns, setFilterColumns] = useState(['population', 'orbital_period', 'diameter', 'rotation_period', 'surface_water']);\n  const [filterByNumericValues, setFilteredValues] = useState({\n    column: 'population',\n    comparison: 'maior que',\n    value: 0\n  });\n\n  const fetchDataFromApi = async () => {\n    const request = await fetch('https://swapi-trybe.herokuapp.com/api/planets/?format=json');\n    const response = await request.json();\n    const result = await response.results.map(planet => {\n      delete planet.residents;\n      return planet;\n    });\n    console.log(result);\n    setData(result);\n    setFilteredData(result);\n  };\n\n  const onChangeName = _ref2 => {\n    let {\n      target\n    } = _ref2;\n    setName(target.value);\n  };\n\n  useEffect(() => {\n    fetchDataFromApi();\n  }, []);\n  useEffect(() => {\n    setFilteredValues(prevState => ({ ...prevState,\n      column: filterColumns[0]\n    }));\n  }, [filterColumns]);\n\n  const returnFilterExpression = elem => {\n    const {\n      column,\n      comparison,\n      value\n    } = filterByNumericValues;\n\n    switch (comparison) {\n      case 'maior que':\n        return Number(elem[column]) > value;\n\n      case 'menor que':\n        return Number(elem[column]) < value;\n\n      default:\n        return elem[column] === value;\n    }\n  };\n\n  const removeSelectedColumn = () => {\n    const {\n      column\n    } = filterByNumericValues;\n    setFilterColumns(filterColumns.filter(value => value !== column));\n  };\n\n  const filterDataByValues = () => {\n    removeSelectedColumn();\n    const dataToFilter = isAlreadyFiltered ? filteredData : data;\n    const filteredDataByValues = dataToFilter.filter(returnFilterExpression);\n    setFilteredData(filteredDataByValues);\n    changeAlreadyFilter(true);\n  };\n\n  const onChangeFilterValues = _ref3 => {\n    let {\n      target\n    } = _ref3;\n    setFilteredValues({ ...filterByNumericValues,\n      [target.name]: target.value\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(TableContext.Provider, {\n    value: {\n      data,\n      filterByName: name,\n      onChangeName,\n      onChangeFilterValues,\n      filterByNumericValues,\n      filterDataByValues,\n      filteredData,\n      isAlreadyFiltered,\n      filterColumns\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TableProvider, \"gIYHArcuVmYJWByEQ0dx1B2/AII=\");\n\n_c = TableProvider;\nTableProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport default TableProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"TableProvider\");","map":{"version":3,"names":["React","useState","useEffect","PropTypes","TableContext","TableProvider","children","data","setData","name","setName","filteredData","setFilteredData","isAlreadyFiltered","changeAlreadyFilter","filterColumns","setFilterColumns","filterByNumericValues","setFilteredValues","column","comparison","value","fetchDataFromApi","request","fetch","response","json","result","results","map","planet","residents","console","log","onChangeName","target","prevState","returnFilterExpression","elem","Number","removeSelectedColumn","filter","filterDataByValues","dataToFilter","filteredDataByValues","onChangeFilterValues","filterByName","propTypes","node","isRequired"],"sources":["/home/myrella/Ãrea de Trabalho/projetos2/sd-021-b-project-starwars-planets-search/src/context/TableProvider.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport TableContext from './TableContext';\n\nfunction TableProvider({ children }) {\n  const [data, setData] = useState(null);\n  const [name, setName] = useState('');\n  const [filteredData, setFilteredData] = useState(null);\n  const [isAlreadyFiltered, changeAlreadyFilter] = useState(false);\n  const [filterColumns, setFilterColumns] = useState([\n    'population',\n    'orbital_period',\n    'diameter',\n    'rotation_period',\n    'surface_water']);\n  const [filterByNumericValues, setFilteredValues] = useState({\n    column: 'population',\n    comparison: 'maior que',\n    value: 0,\n  });\n  const fetchDataFromApi = async () => {\n    const request = await fetch('https://swapi-trybe.herokuapp.com/api/planets/?format=json');\n    const response = await request.json();\n    const result = await response.results.map((planet) => {\n      delete planet.residents;\n      return planet;\n    });\n    console.log(result);\n    setData(result);\n    setFilteredData(result);\n  };\n  const onChangeName = ({ target }) => {\n    setName(target.value);\n  };\n  useEffect(() => {\n    fetchDataFromApi();\n  }, []);\n  useEffect(() => {\n    setFilteredValues((prevState) => ({\n      ...prevState,\n      column: filterColumns[0],\n    }));\n  }, [filterColumns]);\n  const returnFilterExpression = (elem) => {\n    const { column, comparison, value } = filterByNumericValues;\n    switch (comparison) {\n    case 'maior que':\n      return Number(elem[column]) > value;\n    case 'menor que':\n      return Number(elem[column]) < value;\n    default:\n      return elem[column] === value;\n    }\n  };\n  const removeSelectedColumn = () => {\n    const { column } = filterByNumericValues;\n    setFilterColumns(filterColumns.filter((value) => value !== column));\n  };\n  const filterDataByValues = () => {\n    removeSelectedColumn();\n    const dataToFilter = isAlreadyFiltered ? filteredData : data;\n    const filteredDataByValues = dataToFilter.filter(returnFilterExpression);\n    setFilteredData(filteredDataByValues);\n    changeAlreadyFilter(true);\n  };\n  const onChangeFilterValues = ({ target }) => {\n    setFilteredValues({\n      ...filterByNumericValues,\n      [target.name]: target.value,\n    });\n  };\n  return (\n    <TableContext.Provider\n      value={ {\n        data,\n        filterByName: name,\n        onChangeName,\n        onChangeFilterValues,\n        filterByNumericValues,\n        filterDataByValues,\n        filteredData,\n        isAlreadyFiltered,\n        filterColumns,\n      } }\n    >\n      {children}\n    </TableContext.Provider>\n  );\n}\n\nTableProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\nexport default TableProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}