{"ast":null,"code":"var _jsxFileName = \"/home/myrella/\\xC1rea de Trabalho/projetos2/sd-021-b-project-starwars-planets-search/src/context/TableProvider.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport TableContext from './TableContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction TableProvider(_ref) {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [data, setData] = useState(null);\n  const [name, setName] = useState('');\n  const [filteredData, setFilteredData] = useState(null);\n  const [isAlreadyFiltered, changeAlreadyFilter] = useState(false);\n  const [filterByNumericValues, setFilteredValues] = useState({\n    column: 'population',\n    comparison: 'maior que',\n    value: 0\n  });\n\n  const fetchDataFromApi = async () => {\n    const request = await fetch('https://swapi-trybe.herokuapp.com/api/planets/?format=json');\n    const response = await request.json();\n    const result = await response.results.map(planet => {\n      delete planet.residents;\n      return planet;\n    });\n    console.log(result);\n    setData(result);\n    setFilteredData(result);\n  };\n\n  const onChangeName = _ref2 => {\n    let {\n      target\n    } = _ref2;\n    setName(target.value);\n  };\n\n  useEffect(() => {\n    fetchDataFromApi();\n  }, []);\n\n  const returnFilterExpression = elem => {\n    const {\n      column,\n      comparison,\n      value\n    } = filterByNumericValues;\n\n    switch (comparison) {\n      case 'maior que':\n        return Number(elem[column]) > value;\n\n      case 'menor que':\n        return Number(elem[column]) < value;\n\n      default:\n        return elem[column] === value;\n    }\n  };\n\n  const filterDataByValues = () => {\n    const dataToFilter = isAlreadyFiltered ? filteredData : data;\n    const filteredDataByValues = dataToFilter.filter(returnFilterExpression);\n    setFilteredData(filteredDataByValues);\n    changeAlreadyFilter(true);\n  };\n\n  const onChangeFilterValues = _ref3 => {\n    let {\n      target\n    } = _ref3;\n    setFilteredValues({ ...filterByNumericValues,\n      [target.name]: target.value\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(TableContext.Provider, {\n    value: {\n      data,\n      filterByName: name,\n      onChangeName,\n      onChangeFilterValues,\n      filterByNumericValues,\n      filterDataByValues,\n      filteredData,\n      isAlreadyFiltered\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TableProvider, \"/4olVUgKywY+9/nhhJMehQyZJ8M=\");\n\n_c = TableProvider;\nTableProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport default TableProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"TableProvider\");","map":{"version":3,"names":["React","useState","useEffect","PropTypes","TableContext","TableProvider","children","data","setData","name","setName","filteredData","setFilteredData","isAlreadyFiltered","changeAlreadyFilter","filterByNumericValues","setFilteredValues","column","comparison","value","fetchDataFromApi","request","fetch","response","json","result","results","map","planet","residents","console","log","onChangeName","target","returnFilterExpression","elem","Number","filterDataByValues","dataToFilter","filteredDataByValues","filter","onChangeFilterValues","filterByName","propTypes","node","isRequired"],"sources":["/home/myrella/Área de Trabalho/projetos2/sd-021-b-project-starwars-planets-search/src/context/TableProvider.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport TableContext from './TableContext';\n\nfunction TableProvider({ children }) {\n  const [data, setData] = useState(null);\n  const [name, setName] = useState('');\n  const [filteredData, setFilteredData] = useState(null);\n  const [isAlreadyFiltered, changeAlreadyFilter] = useState(false);\n  const [filterByNumericValues, setFilteredValues] = useState({\n    column: 'population',\n    comparison: 'maior que',\n    value: 0,\n  });\n  const fetchDataFromApi = async () => {\n    const request = await fetch('https://swapi-trybe.herokuapp.com/api/planets/?format=json');\n    const response = await request.json();\n    const result = await response.results.map((planet) => {\n      delete planet.residents;\n      return planet;\n    });\n    console.log(result);\n    setData(result);\n    setFilteredData(result);\n  };\n  const onChangeName = ({ target }) => {\n    setName(target.value);\n  };\n  useEffect(() => {\n    fetchDataFromApi();\n  }, []);\n  const returnFilterExpression = (elem) => {\n    const { column, comparison, value } = filterByNumericValues;\n    switch (comparison) {\n    case 'maior que':\n      return Number(elem[column]) > value;\n    case 'menor que':\n      return Number(elem[column]) < value;\n    default:\n      return elem[column] === value;\n    }\n  };\n  const filterDataByValues = () => {\n    const dataToFilter = isAlreadyFiltered ? filteredData : data;\n    const filteredDataByValues = dataToFilter.filter(returnFilterExpression);\n    setFilteredData(filteredDataByValues);\n    changeAlreadyFilter(true);\n  };\n  const onChangeFilterValues = ({ target }) => {\n    setFilteredValues({\n      ...filterByNumericValues,\n      [target.name]: target.value,\n    });\n  };\n  return (\n    <TableContext.Provider\n      value={ {\n        data,\n        filterByName: name,\n        onChangeName,\n        onChangeFilterValues,\n        filterByNumericValues,\n        filterDataByValues,\n        filteredData,\n        isAlreadyFiltered,\n      } }\n    >\n      {children}\n    </TableContext.Provider>\n  );\n}\n\nTableProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\nexport default TableProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}